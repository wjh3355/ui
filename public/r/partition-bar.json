{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "partition-bar",
  "type": "registry:ui",
  "title": "Partition Bar",
  "description": "A partition bar component",
  "files": [
    {
      "path": "registry/8starlabs-ui/blocks/partition-bar.tsx",
      "content": "\"use client\";\n\nimport {\n  Children,\n  createContext,\n  HTMLAttributes,\n  isValidElement,\n  type ReactElement,\n  useContext\n} from \"react\";\nimport { cn } from \"@/lib/utils\";\nimport { cva, VariantProps } from \"class-variance-authority\";\n\ntype PartitionBarContextType = {\n  total: number;\n  size: VariantProps<typeof partitionBarVariants>[\"size\"];\n};\n\nconst PartitionBarCtxt = createContext<PartitionBarContextType | null>(null);\n\nfunction usePartitionBarContext(): PartitionBarContextType {\n  const context = useContext(PartitionBarCtxt);\n  if (!context) {\n    throw new Error(\n      \"usePartitionBarContext must be used within a PartitionBarProvider\"\n    );\n  }\n  return context;\n}\n\n//////////////////////////////////////////////////////////////////////////////\n\nconst partitionBarVariants = cva(\"flex flex-row bg-background\", {\n  variants: {\n    size: {\n      sm: \"text-xs\",\n      md: \"text-sm\",\n      lg: \"text-md\"\n    }\n  },\n  defaultVariants: {\n    size: \"md\"\n  }\n});\n\ninterface PartitionBar\n  extends\n    HTMLAttributes<HTMLUListElement>,\n    VariantProps<typeof partitionBarVariants> {\n  children?:\n    | ReactElement<PartitionBarSegment>\n    | ReactElement<PartitionBarSegment>[];\n  gap?: number;\n}\n\nexport function PartitionBar({\n  children,\n  className,\n  gap = 1,\n  size,\n  ...props\n}: PartitionBar) {\n  const total = Children.toArray(children).reduce<number>(\n    (sum, child) =>\n      isValidElement(child)\n        ? sum + ((child.props as PartitionBarSegment).num || 0)\n        : sum,\n    0\n  );\n\n  return (\n    <PartitionBarCtxt.Provider value={{ total, size }}>\n      <ul\n        className={cn(\"w-full\", partitionBarVariants({ size }), className)}\n        style={{\n          gap: `${gap * 4}px`\n        }}\n        {...props}\n      >\n        {children}\n      </ul>\n    </PartitionBarCtxt.Provider>\n  );\n}\n\n////////////////////////////////////////////////////////////////////////////\n\nconst partitionBarLineVariants = cva(\"\", {\n  variants: {\n    variant: {\n      default: \"bg-primary\",\n      secondary: \"bg-primary/60\",\n      destructive: \"bg-destructive\",\n      outline: \"border border-input bg-background\",\n      muted: \"bg-primary/40\"\n    }\n  },\n  defaultVariants: {\n    variant: \"default\"\n  }\n});\n\nconst partitionBarTitleVariants = cva(\"\", {\n  variants: {\n    variant: {\n      default: \"text-primary\",\n      secondary: \"text-primary/60\",\n      destructive: \"text-destructive\",\n      outline: \"text-foreground\",\n      muted: \"text-primary/40\"\n    }\n  },\n  defaultVariants: {\n    variant: \"default\"\n  }\n});\n\ninterface PartitionBarSegment\n  extends\n    HTMLAttributes<HTMLLIElement>,\n    VariantProps<typeof partitionBarLineVariants> {\n  children?: React.ReactNode;\n  num?: number;\n  variant?: VariantProps<typeof partitionBarLineVariants>[\"variant\"];\n  alignment?: \"left\" | \"center\" | \"right\";\n}\n\nexport function PartitionBarSegment({\n  children,\n  num = 0,\n  variant = \"default\",\n  alignment = \"center\",\n  className,\n  ...props\n}: PartitionBarSegment) {\n  const { total, size } = usePartitionBarContext();\n\n  const widthPercent = total > 0 ? (num / total) * 100 : 0;\n\n  return (\n    <li\n      className=\"flex flex-col min-w-0\"\n      style={{\n        flexBasis: `${widthPercent}%`,\n        flexGrow: 0,\n        flexShrink: 0\n      }}\n      {...props}\n    >\n      <div\n        className={cn(\n          partitionBarLineVariants({ variant }),\n          \"rounded-full w-full shrink-0\",\n          size === \"sm\" ? \"h-2\" : size === \"md\" ? \"h-3\" : \"h-4\",\n          className\n        )}\n      />\n      <div\n        className={cn(\n          partitionBarTitleVariants({ variant }),\n          \"w-full whitespace-normal flex flex-col\",\n          size === \"sm\" ? \"mt-2\" : size === \"md\" ? \"mt-3\" : \"mt-4\",\n          alignment === \"left\" && \"items-start\",\n          alignment === \"center\" && \"items-center\",\n          alignment === \"right\" && \"items-end\"\n        )}\n      >\n        {children}\n      </div>\n    </li>\n  );\n}\n\n/////////////////////////////////////////////////////////////////////////////\n\ninterface PartitionBarSegmentTitle extends HTMLAttributes<HTMLDivElement> {\n  children: React.ReactNode;\n}\n\nexport function PartitionBarSegmentTitle({\n  children,\n  className\n}: PartitionBarSegmentTitle) {\n  return <div className={cn(\"w-fit font-semibold\", className)}>{children}</div>;\n}\n\ninterface PartitionBarSegmentValue extends HTMLAttributes<HTMLDivElement> {\n  children: React.ReactNode;\n}\n\nexport function PartitionBarSegmentValue({\n  children,\n  className\n}: PartitionBarSegmentValue) {\n  return (\n    <div className={cn(\"w-fit text-slate-500 text-[80%]\", className)}>\n      {children}\n    </div>\n  );\n}\n",
      "type": "registry:ui"
    }
  ]
}
